---
global:
  resolve_timeout: 5m

receivers:
  - name: "null"
  - name: "discord"
    webhook_configs:
      - url: "http://alertmanager-discord.observability.svc.cluster.local:9094"

route:
  group_by: ["alertname", "job"]
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 1h
  receiver: "discord"
  routes:
    - receiver: "null"
      matchers:
        - alertname =~ "InfoInhibitor|Watchdog|CPUThrottlingHigh"
      continue: false
    - receiver: "discord"
      matchers:
        - severity = critical
      continue: true

inhibit_rules:
  - source_matchers:
      - "severity = 'critical'"
    target_matchers:
      - "severity = 'warning'"
    equal:
      - "alertname"
      - "namespace"

templates:
- "/etc/alertmanager/template/*.tmpl"
